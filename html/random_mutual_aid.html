<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer" />
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js"></script>
  <title>Random mutual aid</title>
</head>

<body>
  <script>

  </script>


  <script>
    const json = {
      "items": [
        {
          "id": "615986b0a41fd20699c1314e",
          "text": "å¯ä»¥åœ¨è¿™é‡Œå‘é€ä½ ç§è‰æœºçš„åˆ†äº«é“¾æ¥ï¼Œå‘å…¶ä»–é“¾æ¥æ˜¯æ— ç”¨åŠŸã€‚",
          "html": "å¯ä»¥åœ¨è¿™é‡Œå‘é€ä½ ç§è‰æœºçš„åˆ†äº«é“¾æ¥ï¼Œå‘å…¶ä»–é“¾æ¥æ˜¯æ— ç”¨åŠŸã€‚",
          "sent": "2021-10-03T10:32:16.003Z",
          "unread": false,
          "readBy": 0,
          "urls": [],
          "mentions": [],
          "issues": [],
          "meta": [],
          "v": 1,
          "fromUser": "60b8caef6da03739847e0d8d"
        },
        {
          "id": "6159895e3f09d85736f15183",
          "text": "å¯ä»¥åœ¨è¿™é‡Œå‘é€ä½ ç§è‰æœºçš„é‚€è¯·é“¾æ¥ï¼Œå‘å…¶ä»–é“¾æ¥æ˜¯æ— ç”¨åŠŸã€‚",
          "html": "å¯ä»¥åœ¨è¿™é‡Œå‘é€ä½ ç§è‰æœºçš„é‚€è¯·é“¾æ¥ï¼Œå‘å…¶ä»–é“¾æ¥æ˜¯æ— ç”¨åŠŸã€‚",
          "sent": "2021-10-03T10:43:42.366Z",
          "unread": false,
          "readBy": 0,
          "urls": [],
          "mentions": [],
          "issues": [],
          "meta": [],
          "v": 1,
          "fromUser": "60b8caef6da03739847e0d8d"
        },
        {
          "id": "6159a3517db1e3753e1d46fc",
          "text": "ä¸‹é¢æ˜¯ä¸€æ¡ç¤ºä¾‹",
          "html": "ä¸‹é¢æ˜¯ä¸€æ¡ç¤ºä¾‹",
          "sent": "2021-10-03T12:34:25.920Z",
          "unread": false,
          "readBy": 0,
          "urls": [],
          "mentions": [],
          "issues": [],
          "meta": [],
          "v": 1,
          "fromUser": "60b8caef6da03739847e0d8d"
        },
        {
          "id": "6159a375a41fd20699c16876",
          "text": "5.0ğŸ’²zE96XrA8YKMÂ£ https://m.tb.cn/h.fVWjP8Q?sm=342d90  å¥½ä¸œè¥¿å¤ªå¤šäº†ï¼Œè¿˜èƒ½æŠ½å¤§å¥–ï¼",
          "html": "5.0ğŸ’²zE96XrA8YKMÂ£ <a href=\"https://m.tb.cn/h.fVWjP8Q?sm=342d90\" rel=\"nofollow noopener noreferrer\" target=\"_blank\" class=\"link \">https://m.tb.cn/h.fVWjP8Q?sm=342d90</a>  å¥½ä¸œè¥¿å¤ªå¤šäº†ï¼Œè¿˜èƒ½æŠ½å¤§å¥–ï¼",
          "sent": "2021-10-03T12:35:01.330Z",
          "unread": false,
          "readBy": 0,
          "urls": [
            {
              "url": "https://m.tb.cn/h.fVWjP8Q?sm=342d90"
            }
          ],
          "mentions": [],
          "issues": [],
          "meta": [],
          "v": 1,
          "fromUser": "60b8caef6da03739847e0d8d"
        }
      ],
      "lookups": {
        "users": {
          "60b8caef6da03739847e0d8d": {
            "id": "60b8caef6da03739847e0d8d",
            "username": "leecobaby",
            "displayName": "Leeco",
            "url": "/leecobaby",
            "avatarUrl": "https://avatars-05.gitter.im/gh/uv/4/leecobaby",
            "avatarUrlSmall": "https://avatars0.githubusercontent.com/u/48404687?v=4&s=60",
            "avatarUrlMedium": "https://avatars0.githubusercontent.com/u/48404687?v=4&s=128",
            "v": 9,
            "gv": "4"
          }
        }
      }
    }
    // æ”¾å…¥é­”æ³•å˜é‡

    const data = json.items
    // é€‰å‡ºæœ‰ url çš„å…ƒç´ 
    const filterData = _.filter(data, v => v.urls[0])
    // è¿‡æ»¤é‡å¤çš„ user id
    const uniqData = _.uniqBy(filterData, v => v.fromUser)
    // éšæœºé€‰å–å‡º 10 ä¸ªåŠ©åŠ› url - è€ƒè™‘åˆ°åŠ©åŠ›å·²æ»¡æƒ…å†µå’Œæ— é“¾æ¥çš„æƒ…å†µ
    const sampleData = _.sampleSize(uniqData, 10)
    const urls = sampleData.map(v => v.urls[0].url)
    const item = urls.map(v => v.match(/https:\/\/(.*)/)[0] + ' 0');
    // console.log(urls);
    const task = {
      "help": {
        "title": "å¸®åŠ©åŠ©åŠ›",
        "type": "help",
        "urlScheme": "HTTPS://",
        "textEnd": "str1",
        "item": item || ['1 0']
      }
    }

    document.write(JSON.stringify(task))



  </script>

</body>

</html>